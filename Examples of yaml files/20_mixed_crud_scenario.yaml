# 20_mixed_crud_scenario.yaml
# A comprehensive scenario simulating a full resource lifecycle using chaining.
# Create -> Read -> Update -> Delete

load:
  duration: "1m"
  rate: 2
  concurrency: 2

steps:
  # Step 1: Create a resource
  - name: "Create"
    url: "https://api.example.com/v1/items"
    method: "POST"
    body: '{"name": "Item {{ uuid }}", "type": "widget"}'
    extract:
      item_id: "id"

  # Step 2: Read it to verify
  - name: "Read"
    url: "https://api.example.com/v1/items/{{ item_id }}"
    method: "GET"

  # Step 3: Update it
  - name: "Update"
    url: "https://api.example.com/v1/items/{{ item_id }}"
    method: "PUT"
    body: '{"name": "Updated Item {{ uuid }}", "type": "widget", "status": "active"}'

  # Step 4: Delete it
  - name: "Delete"
    url: "https://api.example.com/v1/items/{{ item_id }}"
    method: "DELETE"
    # Ensure it was deleted (expect 200 or 204)
